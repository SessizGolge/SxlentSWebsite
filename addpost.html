<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Post | SxlentStudios</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1 style="text-align:center;color:#ff8aff;margin-top:100px;">Add a New Post</h1>

<form id="postForm" style="max-width:500px;margin:50px auto;display:flex;flex-direction:column;gap:12px;">
  <input type="text" id="title" placeholder="Title" required>
  <input type="text" id="description" placeholder="Description" required>
  <input type="text" id="image" placeholder="Image URL">
  <input type="text" id="link" placeholder="Link URL">
  <button type="submit" style="background:#ff8aff;color:#000;padding:10px;border:none;cursor:pointer;">Add Post</button>
</form>

<script>
const form = document.getElementById("postForm");
form.addEventListener("submit", async e => {
  e.preventDefault();

  const post = {
    key: prompt("Enter admin password again:"), 
    title: document.getElementById("title").value,
    description: document.getElementById("description").value,
    image: document.getElementById("image").value,
    link: document.getElementById("link").value
  };

  try {
    const res = await fetch("http://localhost:3000/addPost", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(post)
    });

    const data = await res.json();
    if(data.status === "ok"){
      alert("Post added!");
      window.location.href = "index.html";
    } else {
      alert("Error adding post!");
    }
  } catch(err){
    console.error(err);
    alert("Server error!");
  }
});
</script>

</body>
</html>
